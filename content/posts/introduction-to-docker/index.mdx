---
title: Introduction to Docker
slug: introduction-to-docker
date: 2021-06-28
featureImage: images/docker.jpg
excerpt: Docker is a technology that allows us to build, run, and ship applications consistently.
thumbnail: ../images/docker.png
tags: ["Linux", "Docker"]
---

# Docker

## What is Docker?

Docker is an open-source project that allows the user to automate application deployment using software containers, providing an additional layer of abstraction and virtualization automation of applications across multiple operating systems.

Docker uses the resource isolation feature of the Linux kernel, such as cgroups and namespacces. This allows docker “containers” to run independently within a single Linux instance, thus avoiding the overhead of starting and maintaining virtual machines.

Docker solves the problem of the same software not working or behaving the same in different environments. Docker also allows us to run multiple applications with different versions of the same software in parallel without creating conflicts. This is achieved by running the applications in isolation

## Virtual Machines vs Containers

A **container** is an isolated environment to run an application. It is essentially an operating system process with its own file system.

A **virtual machine** is an abstraction of hardware resources. These are created using hypervisors.

A virtual machine allows us to run applications in isolation. With the disadvantage that each virtual machine needs a complete operating system and a part of the available resources. This makes each virtual machine consume much more resources and its startup is slow. On the contrary, the containers are very light and start quickly since they share the Host’s kernel (which is already started).

## Docker Architecture

Docker uses a client/Server architecture. Docker has a component that talks to the server using a RESTful API. This “server” is known as the Docker Engine (or daemon). The server runs in the background and is responsible for doing the heavy lifting.

![Containers are processes](./images/process.png)

> Windows 10 includes the Linux kernel in addition to the windows kernel. So we can run Linux applications natively on windows.

## Installing Docker

You can download docker from [here](https://docs.docker.com/get-docker/).

## Docker Images

An image is a template that contains instructions with which you can create a Docker container. Often an image is initialized with another image with some additional settings.

An image is a kind of snapshot or template of a virtual machine, but much lighter.

### An image usually includes:

- A lightweight operating system.
- A runtime environment.
- Application files.
- Third party libraries.
- Environment variables, etc.

## Workflow

With Docker we can package an application in an image, once we have an image it can be run on any machine that has docker. El registro de docker más popular es [DockerHub](https://hub.docker.com/).

To package an application we must add a `Dockerfile`, this plain text file includes the instructions to package the image.

### Dockerfile

A `Dockerfile` is a configuration file used to create images. This file indicates what the image will contain and the various commands that will be used to install the different tools used by the image.

```dockerfile
# Basic Node Dockerfile
FROM node:14.17.0-alpine3.13
WORKDIR /my_app
COPY . .
RUN npm install
EXPOSE 8000
ENTRYPOINT ["npm", "start"]
```

### Dockerfile Instructions

- **`FROM`:** Specifies the base image. A base image does not have a parent image specified in its dockerfile. It is created using the `FROM scratch` directive.

- **`WORKDIR`:** Sets the working directory from any `RUN`, `CMD`, `ENTRYPOINT`, `COPY` and `ADD` instruction.

- **`COPY`:** This instruction copies new files/directories from `<src>` and adds them to the filesystem of the container at the path `<dest>`.

- **`ADD`:** This instruction copies new files/directories or remote URLs from `<src>` and adds them to the path `<dest>`.

- **`RUN`:** This instruction will execute any command in a new layer on top of the current image and commit the results. The result image will be used in the next step in the `Dockerfile`.

- **`ENV`:** Sets the environment variable `<key>` to the value `<value>`. This value will be in the environment for all the subsecuent instructions in the building process.

- **`EXPOSE`:** Informs Docker that the container listens on the specified network port at runtime.

- **`USER`:** Sets the user name (or UID) and optionally the user group (or GID) to use when running the image and for any `RUN`, `CMD`, `ENTRYPOINT` instruction that follow it in the `Dockerfile`.

- **`CMD`:** This instruction specifies a command or executable to be executed at run time. If omitted an `ENTRYPOINT` instruction must be used.

- **`ENTRYPOINT`:** This instruction allows you to configure a container that will run as an executable.
